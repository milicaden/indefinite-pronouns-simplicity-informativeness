library(plyr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(minpack.lm)

source("./Indefinites_functions.R")
####################################
####################################
# DATA
####################################
Folder = "../data/"
exp1languagesname = paste0(Folder, "languages_exp1.csv")
df = read.csv(exp1languagesname)

matched_name = paste0(Folder, "Exp1_languages_matched001_timeout.csv")
matched = read.csv(matched_name)

# Subset to matched languages
df = subset(df, LANG %in% matched$LANG)

####################################
# Additional estimates that will be useful in later computations
####################################
# Prep a data frame (cf. function prep)
df = prep(df)

# Complexity of a language in terms of Haspelmath's features
# Import minimal descriptions (generated by Min-desc-algo.R script)
min.desc = read.csv2(paste0(Folder, "minimum-desc-indef.csv"), header = TRUE)
df <- merge(df, min.desc[,c("meaning", "complexity", "names.descriptions.")], by = c("meaning"))


####################################
# COMPUTE COMMUNICATIVE COST AND COMPLEXITY OF LANGUAGES
####################################
compcostfile <- paste0(Folder, "all_complexity_cost_exp1.csv")

generate = TRUE

if(generate) {
  allfinal <-compcostsyn(df)
  write.csv(allfinal, compcostfile, row.names=FALSE)
} else {
  allfinal <- read.csv(compcostfile)
}

